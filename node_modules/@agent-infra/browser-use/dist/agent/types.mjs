/**
* Copyright (c) 2025 Bytedance, Inc. and its affiliates.
* SPDX-License-Identifier: Apache-2.0
*/
import * as __WEBPACK_EXTERNAL_MODULE_zod__ from "zod";
import * as __WEBPACK_EXTERNAL_MODULE__event_types_mjs_55097f94__ from "./event/types.mjs";
function _define_property(obj, key, value) {
    if (key in obj) Object.defineProperty(obj, key, {
        value: value,
        enumerable: true,
        configurable: true,
        writable: true
    });
    else obj[key] = value;
    return obj;
}
const DEFAULT_AGENT_OPTIONS = {
    maxSteps: 100,
    maxActionsPerStep: 10,
    maxFailures: 3,
    retryDelay: 10,
    maxInputTokens: 128000,
    maxErrorLength: 400,
    useVision: false,
    useVisionForPlanner: false,
    validateOutput: true,
    includeAttributes: [
        'title',
        'type',
        'name',
        'role',
        'tabindex',
        'aria-label',
        'placeholder',
        'value',
        'alt',
        'aria-expanded'
    ],
    planningInterval: 3
};
class AgentContext {
    async emitEvent(actor, state, eventDetails, browserState) {
        const event = new __WEBPACK_EXTERNAL_MODULE__event_types_mjs_55097f94__.AgentEvent(actor, state, {
            taskId: this.taskId,
            step: this.nSteps,
            maxSteps: this.options.maxSteps,
            details: eventDetails,
            browserState
        });
        await this.eventManager.emit(event);
    }
    async pause() {
        this.paused = true;
    }
    async resume() {
        this.paused = false;
    }
    async stop() {
        this.stopped = true;
    }
    constructor(taskId, browserContext, messageManager, eventManager, options){
        _define_property(this, "taskId", void 0);
        _define_property(this, "browserContext", void 0);
        _define_property(this, "messageManager", void 0);
        _define_property(this, "eventManager", void 0);
        _define_property(this, "options", void 0);
        _define_property(this, "paused", void 0);
        _define_property(this, "stopped", void 0);
        _define_property(this, "consecutiveFailures", void 0);
        _define_property(this, "nSteps", void 0);
        _define_property(this, "stepInfo", void 0);
        _define_property(this, "actionResults", void 0);
        _define_property(this, "stateMessageAdded", void 0);
        this.taskId = taskId;
        this.browserContext = browserContext;
        this.messageManager = messageManager;
        this.eventManager = eventManager;
        this.options = {
            ...DEFAULT_AGENT_OPTIONS,
            ...options
        };
        this.paused = false;
        this.stopped = false;
        this.nSteps = 0;
        this.consecutiveFailures = 0;
        this.stepInfo = null;
        this.actionResults = [];
        this.stateMessageAdded = false;
    }
}
class AgentStepInfo {
    constructor(params){
        _define_property(this, "stepNumber", void 0);
        _define_property(this, "maxSteps", void 0);
        this.stepNumber = params.stepNumber;
        this.maxSteps = params.maxSteps;
    }
}
class ActionResult {
    constructor(params = {}){
        _define_property(this, "isDone", void 0);
        _define_property(this, "extractedContent", void 0);
        _define_property(this, "error", void 0);
        _define_property(this, "includeInMemory", void 0);
        this.isDone = params.isDone ?? false;
        this.extractedContent = params.extractedContent ?? null;
        this.error = params.error ?? null;
        this.includeInMemory = params.includeInMemory ?? false;
    }
}
const agentBrainSchema = __WEBPACK_EXTERNAL_MODULE_zod__.z.object({
    page_summary: __WEBPACK_EXTERNAL_MODULE_zod__.z.string(),
    evaluation_previous_goal: __WEBPACK_EXTERNAL_MODULE_zod__.z.string(),
    memory: __WEBPACK_EXTERNAL_MODULE_zod__.z.string(),
    next_goal: __WEBPACK_EXTERNAL_MODULE_zod__.z.string()
});
export { ActionResult, AgentContext, AgentStepInfo, DEFAULT_AGENT_OPTIONS, agentBrainSchema };

//# sourceMappingURL=types.mjs.map