/**
* Copyright (c) 2025 Bytedance, Inc. and its affiliates.
* SPDX-License-Identifier: Apache-2.0
*/
"use strict";
var __webpack_require__ = {};
(()=>{
    __webpack_require__.d = (exports1, definition)=>{
        for(var key in definition)if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports1, key)) Object.defineProperty(exports1, key, {
            enumerable: true,
            get: definition[key]
        });
    };
})();
(()=>{
    __webpack_require__.o = (obj, prop)=>Object.prototype.hasOwnProperty.call(obj, prop);
})();
(()=>{
    __webpack_require__.r = (exports1)=>{
        if ('undefined' != typeof Symbol && Symbol.toStringTag) Object.defineProperty(exports1, Symbol.toStringTag, {
            value: 'Module'
        });
        Object.defineProperty(exports1, '__esModule', {
            value: true
        });
    };
})();
var __webpack_exports__ = {};
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
    DEFAULT_AGENT_OPTIONS: ()=>DEFAULT_AGENT_OPTIONS,
    ActionResult: ()=>ActionResult,
    agentBrainSchema: ()=>agentBrainSchema,
    AgentContext: ()=>AgentContext,
    AgentStepInfo: ()=>AgentStepInfo
});
const external_zod_namespaceObject = require("zod");
const types_js_namespaceObject = require("./event/types.js");
function _define_property(obj, key, value) {
    if (key in obj) Object.defineProperty(obj, key, {
        value: value,
        enumerable: true,
        configurable: true,
        writable: true
    });
    else obj[key] = value;
    return obj;
}
const DEFAULT_AGENT_OPTIONS = {
    maxSteps: 100,
    maxActionsPerStep: 10,
    maxFailures: 3,
    retryDelay: 10,
    maxInputTokens: 128000,
    maxErrorLength: 400,
    useVision: false,
    useVisionForPlanner: false,
    validateOutput: true,
    includeAttributes: [
        'title',
        'type',
        'name',
        'role',
        'tabindex',
        'aria-label',
        'placeholder',
        'value',
        'alt',
        'aria-expanded'
    ],
    planningInterval: 3
};
class AgentContext {
    async emitEvent(actor, state, eventDetails, browserState) {
        const event = new types_js_namespaceObject.AgentEvent(actor, state, {
            taskId: this.taskId,
            step: this.nSteps,
            maxSteps: this.options.maxSteps,
            details: eventDetails,
            browserState
        });
        await this.eventManager.emit(event);
    }
    async pause() {
        this.paused = true;
    }
    async resume() {
        this.paused = false;
    }
    async stop() {
        this.stopped = true;
    }
    constructor(taskId, browserContext, messageManager, eventManager, options){
        _define_property(this, "taskId", void 0);
        _define_property(this, "browserContext", void 0);
        _define_property(this, "messageManager", void 0);
        _define_property(this, "eventManager", void 0);
        _define_property(this, "options", void 0);
        _define_property(this, "paused", void 0);
        _define_property(this, "stopped", void 0);
        _define_property(this, "consecutiveFailures", void 0);
        _define_property(this, "nSteps", void 0);
        _define_property(this, "stepInfo", void 0);
        _define_property(this, "actionResults", void 0);
        _define_property(this, "stateMessageAdded", void 0);
        this.taskId = taskId;
        this.browserContext = browserContext;
        this.messageManager = messageManager;
        this.eventManager = eventManager;
        this.options = {
            ...DEFAULT_AGENT_OPTIONS,
            ...options
        };
        this.paused = false;
        this.stopped = false;
        this.nSteps = 0;
        this.consecutiveFailures = 0;
        this.stepInfo = null;
        this.actionResults = [];
        this.stateMessageAdded = false;
    }
}
class AgentStepInfo {
    constructor(params){
        _define_property(this, "stepNumber", void 0);
        _define_property(this, "maxSteps", void 0);
        this.stepNumber = params.stepNumber;
        this.maxSteps = params.maxSteps;
    }
}
class ActionResult {
    constructor(params = {}){
        _define_property(this, "isDone", void 0);
        _define_property(this, "extractedContent", void 0);
        _define_property(this, "error", void 0);
        _define_property(this, "includeInMemory", void 0);
        this.isDone = params.isDone ?? false;
        this.extractedContent = params.extractedContent ?? null;
        this.error = params.error ?? null;
        this.includeInMemory = params.includeInMemory ?? false;
    }
}
const agentBrainSchema = external_zod_namespaceObject.z.object({
    page_summary: external_zod_namespaceObject.z.string(),
    evaluation_previous_goal: external_zod_namespaceObject.z.string(),
    memory: external_zod_namespaceObject.z.string(),
    next_goal: external_zod_namespaceObject.z.string()
});
var __webpack_export_target__ = exports;
for(var __webpack_i__ in __webpack_exports__)__webpack_export_target__[__webpack_i__] = __webpack_exports__[__webpack_i__];
if (__webpack_exports__.__esModule) Object.defineProperty(__webpack_export_target__, '__esModule', {
    value: true
});

//# sourceMappingURL=types.js.map