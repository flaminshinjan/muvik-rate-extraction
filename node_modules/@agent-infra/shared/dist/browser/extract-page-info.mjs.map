{"version":3,"file":"browser/extract-page-info.mjs","sources":["webpack://@agent-infra/shared/./src/browser/extract-page-info.ts"],"sourcesContent":["/*\n * Copyright (c) 2025 Bytedance, Inc. and its affiliates.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * Interface representing extracted page information\n */\ninterface PageInfo {\n  /** Page title */\n  title: string;\n  /** Page content in HTML format */\n  content: string;\n}\n\n/**\n * Extracts readable content from a web page using Readability\n * @param window Browser window object\n * @param readabilityScript Readability library script as string\n * @returns Extracted page information (title and content)\n */\nexport function extractPageInformation(\n  window: Window,\n  readabilityScript: string,\n): PageInfo {\n  const Readability = new Function(\n    'module',\n    `${readabilityScript}\\nreturn module.exports`,\n  )({});\n\n  const document = window.document;\n\n  // Remove non-content elements to improve extraction quality\n  document\n    .querySelectorAll(\n      'script,noscript,style,link,svg,img,video,iframe,canvas,.reflist',\n    )\n    .forEach((el) => el.remove());\n\n  // Parse the document using Readability\n  const article = new Readability(document).parse();\n  const content = article?.content || '';\n  const title = document.title;\n\n  return {\n    content,\n    title: article?.title || title,\n  };\n}\n"],"names":["extractPageInformation","window","readabilityScript","Readability","Function","document","el","article","content","title"],"mappings":";;;;AAqBO,SAASA,uBACdC,MAAc,EACdC,iBAAyB;IAEzB,MAAMC,cAAc,IAAIC,SACtB,UACA,GAAGF,kBAAkB,uBAAuB,CAAC,EAC7C,CAAC;IAEH,MAAMG,WAAWJ,OAAO,QAAQ;IAGhCI,SACG,gBAAgB,CACf,mEAED,OAAO,CAAC,CAACC,KAAOA,GAAG,MAAM;IAG5B,MAAMC,UAAU,IAAIJ,YAAYE,UAAU,KAAK;IAC/C,MAAMG,UAAUD,AAAAA,CAAAA,QAAAA,UAAAA,KAAAA,IAAAA,QAAS,OAAO,AAAD,KAAK;IACpC,MAAME,QAAQJ,SAAS,KAAK;IAE5B,OAAO;QACLG;QACA,OAAOD,AAAAA,CAAAA,QAAAA,UAAAA,KAAAA,IAAAA,QAAS,KAAK,AAAD,KAAKE;IAC3B;AACF"}